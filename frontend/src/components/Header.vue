<template>

  <header class="bg-dark">

    <nav class="navbar navbar-expand navbar-dark bg-dark text-light px-3 py-2">
      <div class="me-auto">
        <a href="/" class="d-flex align-items-center me-auto text-light text-decoration-none">
          <svg width="33" height="38" viewBox="0 0 84 97" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M39.5211 95.6902L3.61798 74.6835C2.75718 74.178 2.04247 73.4524 1.54536 72.5792C1.04825 71.706 0.786152 70.7159 0.785291 69.7078V27.7114C0.783212 26.7005 1.04391 25.7069 1.54117 24.8304C2.03843 23.954 2.75472 23.2257 3.61798 22.7187L39.5211 1.72904C40.3849 1.22377 41.3647 0.957764 42.3621 0.957764C43.3596 0.957764 44.3394 1.22377 45.2032 1.72904L81.0895 22.7357C81.9528 23.2427 82.6691 23.971 83.1663 24.8474C83.6636 25.7239 83.9243 26.7175 83.9222 27.7284V69.7078C83.9243 70.7187 83.6636 71.7124 83.1663 72.5888C82.6691 73.4653 81.9528 74.1936 81.0895 74.7005L45.2032 95.6902C44.3394 96.1955 43.3596 96.4615 42.3621 96.4615C41.3647 96.4615 40.3849 96.1955 39.5211 95.6902Z"
                fill="white"/>
            <path
                d="M33.9814 70.0738C32.8046 70.0738 31.851 69.1059 31.851 67.9137V30.3623C31.851 29.1717 32.299 28.385 33.3161 27.7889L48.7459 18.753C49.7639 18.1569 50.6607 18.1569 51.6786 18.753L58.9932 23.0368C60.0103 23.633 60.4583 24.4196 60.4583 25.6102V67.9134C60.4583 69.1056 59.5039 70.0727 58.3271 70.0727C57.1503 70.0727 56.1959 69.1056 56.1959 67.9134V26.3864L50.2117 22.8816L36.1136 31.1385V67.9123C36.1136 69.1045 35.1591 70.0715 33.9824 70.0715L33.9814 70.0738ZM33.9822 79.5779C33.5811 79.5779 33.2058 79.4678 32.8848 79.2722L25.2016 74.7725C24.1844 74.1764 23.7365 73.3897 23.7365 72.1992V25.6127C23.7365 24.4222 24.1845 23.6355 25.2016 23.0394L32.8848 18.5396C33.2058 18.3441 33.5811 18.2314 33.9822 18.2314C35.159 18.2314 36.1134 19.1985 36.1134 20.3907C36.1134 21.2036 35.6697 21.9115 35.0145 22.2799L27.9982 26.3884V71.421L35.0145 75.5295C35.6697 75.8979 36.1134 76.6058 36.1134 77.4187C36.1134 78.6109 35.159 79.5779 33.9822 79.5779ZM42.0982 79.5804C40.9214 79.5804 39.9678 78.6125 39.9678 77.4202V54.127C39.9678 52.9364 40.4158 52.1497 41.4329 51.5536L49.1379 47.0353C49.4738 46.8388 49.8399 46.7457 50.2017 46.7457C50.938 46.7457 51.6543 47.1327 52.0488 47.8253C52.2427 48.1657 52.3346 48.5365 52.3346 48.9032L52.3447 72.6678C52.3447 73.86 51.3902 74.827 50.2134 74.827C49.0367 74.827 48.0822 73.86 48.0822 72.6678V52.6473L44.2293 54.9039V77.421C44.2293 78.6132 43.2748 79.5802 42.0981 79.5802L42.0982 79.5804ZM42.0982 46.312C40.9214 46.312 39.9678 45.3441 39.9678 44.1518V35.1159C39.9678 33.9253 40.4166 33.1395 41.4337 32.5425L49.1387 28.0242C49.4747 27.8277 49.8407 27.7346 50.2026 27.7346C50.9389 27.7346 51.6552 28.1216 52.0496 28.8142C52.2436 29.1546 52.3355 29.5255 52.3355 29.8921L52.3455 39.3996C52.3455 40.5919 51.3902 41.5589 50.2134 41.5589C49.0367 41.5589 48.0822 40.5919 48.0822 39.3996V33.6365L44.2293 35.8931V44.1525C44.2293 45.3448 43.2748 46.3118 42.0981 46.3118L42.0982 46.312Z"
                fill="#111111"/>
          </svg>

          <span class="ms-2 fs-4">Arithmetic PvP</span>
        </a>
      </div>

      <div v-if="!smallScreen">
         <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
                    <li>
                        <a href="/newGame" class="nav-link text-light">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                 class="bi bi-controller d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M11.5 6.027a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2.5-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm-6.5-3h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/>
                                <path d="M3.051 3.26a.5.5 0 0 1 .354-.613l1.932-.518a.5.5 0 0 1 .62.39c.655-.079 1.35-.117 2.043-.117.72 0 1.443.041 2.12.126a.5.5 0 0 1 .622-.399l1.932.518a.5.5 0 0 1 .306.729c.14.09.266.19.373.297.408.408.78 1.05 1.095 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.816-.059 1.602-.328 2.21a1.42 1.42 0 0 1-1.445.83c-.636-.067-1.115-.394-1.513-.773-.245-.232-.496-.526-.739-.808-.126-.148-.25-.292-.368-.423-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.423-.243.282-.494.575-.739.808-.398.38-.877.706-1.513.773a1.42 1.42 0 0 1-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772a2.34 2.34 0 0 1 .433-.335.504.504 0 0 1-.028-.079zm2.036.412c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 0 0-.748 2.295 12.351 12.351 0 0 0-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 0 0 .426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.504C4.861 9.969 5.978 9.027 8 9.027s3.139.942 3.965 1.855c.164.181.307.348.44.504.214.251.403.472.615.674.318.303.601.468.929.503a.42.42 0 0 0 .426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 0 0-.339-2.406 13.753 13.753 0 0 0-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z"/>
                            </svg>
                            <span class="links">New Game</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link text-light">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                 class="bi bi-door-open d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"/>
                                <path d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117zM11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5zM4 1.934V15h6V1.077l-6 .857z"/>
                            </svg>
                            <span class="links">Open Rooms</span>
                        </a>
                    </li>
                    <li>
                        <a href="/community" class="nav-link text-light">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                 class="bi bi-globe d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                            </svg>
                            <span class="links">Community</span>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link text-light d-flex flex-column align-items-center" v-bind:href="[isAuthorized ? '/user': '/signIn']">
                            <b-avatar v-if="isAuthorized" v-bind:text="first_name[0] + second_name[0]" size="1.5em"></b-avatar>
                            <svg v-else xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                 class="bi bi-person-square d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"/>
                            </svg>

                            <span class="links m-1" v-if="isAuthorized">{{ first_name + " " + second_name }}</span>
                            <span class="links" v-else>User Name</span>
                        </a>
                    </li>
                </ul>
      </div>
      <div class="ms-auto" v-else>
        <div>
          <b-dropdown variant="link" toggle-class="text-decoration-none" class="justify-content-center" right no-caret >
            <template #button-content>
              <span class="dark-amber-text"><i
                  class="bi bi-list"></i></span>
            </template>

              <div class="d-flex flex-row justify-content-center align-items-center">
                <b-dropdown-item href="/newGame"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white"
                                 class="bi bi-controller d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M11.5 6.027a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2.5-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm-6.5-3h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/>
                                <path d="M3.051 3.26a.5.5 0 0 1 .354-.613l1.932-.518a.5.5 0 0 1 .62.39c.655-.079 1.35-.117 2.043-.117.72 0 1.443.041 2.12.126a.5.5 0 0 1 .622-.399l1.932.518a.5.5 0 0 1 .306.729c.14.09.266.19.373.297.408.408.78 1.05 1.095 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.816-.059 1.602-.328 2.21a1.42 1.42 0 0 1-1.445.83c-.636-.067-1.115-.394-1.513-.773-.245-.232-.496-.526-.739-.808-.126-.148-.25-.292-.368-.423-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.423-.243.282-.494.575-.739.808-.398.38-.877.706-1.513.773a1.42 1.42 0 0 1-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772a2.34 2.34 0 0 1 .433-.335.504.504 0 0 1-.028-.079zm2.036.412c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 0 0-.748 2.295 12.351 12.351 0 0 0-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 0 0 .426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.504C4.861 9.969 5.978 9.027 8 9.027s3.139.942 3.965 1.855c.164.181.307.348.44.504.214.251.403.472.615.674.318.303.601.468.929.503a.42.42 0 0 0 .426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 0 0-.339-2.406 13.753 13.753 0 0 0-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z"/>
                            </svg>
                            <h6 class="links fw-light text-wrap text-center text-light">Game modes</h6></b-dropdown-item>
                <b-dropdown-item href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white"
                                 class="bi bi-door-open d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"/>
                                <path d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117zM11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5zM4 1.934V15h6V1.077l-6 .857z"/>
                            </svg>
                            <h6 class="links fw-light text-wrap text-center text-light">Open Rooms</h6></b-dropdown-item>
                <b-dropdown-item href="/community"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white"
                                 class="bi bi-globe d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                            </svg>
                            <h6 class="links fw-light text-wrap text-center text-light">About Us</h6></b-dropdown-item>

                <b-dropdown-item v-if="isAuthorized" href="/user"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white"
                                 class="bi bi-person-square d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"/>
                            </svg>
                            <h6 class="links fw-light text-wrap text-center text-light">{{ first_name + " " + second_name }}</h6></b-dropdown-item>
                <b-dropdown-item v-else href="/signIn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white"
                                 class="bi bi-person-square d-block mx-auto mb-1" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"/>
                            </svg>
                            <h6 class="links fw-light text-wrap text-center text-light">User Name</h6></b-dropdown-item>

              </div>

          </b-dropdown>
        </div>
      </div>

    </nav>

  </header>

</template>

<script>
import axios from "axios";

export default {
  name: "Header",
  data() {
    return {
      isOpen: false,
      smallScreen: window.innerWidth < 800,
      isAuthorized: false,
      first_name: "Ivan",
      second_name: "Ivanov"
    }
  },
  components: {

  },
  methods: {
    // Check the size of the window
    isSmall() {
      this.smallScreen = window.innerWidth < 800
      return this.smallScreen
    },
    // Window resize listener
    // eslint-disable-next-line no-unused-vars
    myEventHandler(e) {
      this.smallScreen = window.innerWidth < 800;
    }
  },
  created() {
      window.addEventListener("resize", this.myEventHandler);
      axios.get("/api/get_user_info/")
        .then(response => {
          console.log(response)
          this.first_name = response.data.name
          this.second_name = response.data.surname
          this.isAuthorized = true
        })
        .catch(error => {
          console.log(error)
          this.isAuthorized = false
        })
  },
}
</script>

<style scoped>
::v-deep .dropdown-menu{
    background-color: #292b2c;;
}

</style>